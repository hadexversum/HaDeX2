<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Data aggregation • HaDeX2</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Data aggregation">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">HaDeX2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/data_input.html">Importing data</a></li>
    <li><a class="dropdown-item" href="../articles/datafiles.html">Calculations</a></li>
    <li><a class="dropdown-item" href="../articles/example.html">Example HDX-MS data analysis</a></li>
    <li><a class="dropdown-item" href="../articles/glossary.html">Glossary</a></li>
    <li><a class="dropdown-item" href="../articles/mass_comparison.html">Mass calculation</a></li>
    <li><a class="dropdown-item" href="../articles/quality_control.html">Quality control</a></li>
    <li><a class="dropdown-item" href="../articles/statistics.html">Statistics</a></li>
    <li><a class="dropdown-item" href="../articles/transformation.html">Data aggregation</a></li>
    <li><a class="dropdown-item" href="../articles/usage.html">Code usage</a></li>
    <li><a class="dropdown-item" href="../articles/version_comparison.html">Comparison between versions</a></li>
    <li><a class="dropdown-item" href="../articles/visualization.html">Data visualization</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">


<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Data aggregation</h1>
            
      

      <div class="d-none name"><code>transformation.Rmd</code></div>
    </div>

    
    
<p>The aggregation of the hydrogen-deuterium exchange experimental data is complex. This article describes the process step by step for a better understanding of the data transformation.</p>
<div class="section level2" number="0.1">
<h2 id="aggregation-of-the-data---visualization">
<span class="header-section-number">0.1</span> Aggregation of the data - visualization<a class="anchor" aria-label="anchor" href="#aggregation-of-the-data---visualization"></a>
</h2>
<p>Let’s see how the data is transformed. We will use the example alpha_dat file from the HaDeX package and focus on just one peptide - “GFGDLKSPAGL” in the state “Alpha”. The measurement was made for time point 1 min.</p>
<p>Below is shown the original and not aggregated data for chosen peptide.</p>
<pre><code><span><span class="co">##      Protein Start   End    Sequence Modification MaxUptake      MHP      State</span></span>
<span><span class="co">##       &lt;char&gt; &lt;int&gt; &lt;int&gt;      &lt;char&gt;       &lt;lgcl&gt;     &lt;int&gt;    &lt;num&gt;     &lt;char&gt;</span></span>
<span><span class="co">## 1: db_eEF1Ba     1    11 GFGDLKSPAGL           NA         9 1061.563 Alpha_KSCN</span></span>
<span><span class="co">## 2: db_eEF1Ba     1    11 GFGDLKSPAGL           NA         9 1061.563 Alpha_KSCN</span></span>
<span><span class="co">## 3: db_eEF1Ba     1    11 GFGDLKSPAGL           NA         9 1061.563 Alpha_KSCN</span></span>
<span><span class="co">## 4: db_eEF1Ba     1    11 GFGDLKSPAGL           NA         9 1061.563 Alpha_KSCN</span></span>
<span><span class="co">## 5: db_eEF1Ba     1    11 GFGDLKSPAGL           NA         9 1061.563 Alpha_KSCN</span></span>
<span><span class="co">## 6: db_eEF1Ba     1    11 GFGDLKSPAGL           NA         9 1061.563 Alpha_KSCN</span></span>
<span><span class="co">##    Exposure                           File     z  Inten    Center</span></span>
<span><span class="co">##       &lt;num&gt;                         &lt;char&gt; &lt;int&gt;  &lt;int&gt;     &lt;num&gt;</span></span>
<span><span class="co">## 1:        1 Tania_161108_1eEF1Ba_KSCN_1min     1  48304 1064.9813</span></span>
<span><span class="co">## 2:        1 Tania_161108_1eEF1Ba_KSCN_1min     2 430554  533.0463</span></span>
<span><span class="co">## 3:        1 Tania_161108_2eEF1Ba_KSCN_1min     1  48450 1065.1294</span></span>
<span><span class="co">## 4:        1 Tania_161108_2eEF1Ba_KSCN_1min     2 456787  532.9971</span></span>
<span><span class="co">## 5:        1 Tania_161108_3eEF1Ba_KSCN_1min     1  53200 1065.0681</span></span>
<span><span class="co">## 6:        1 Tania_161108_3eEF1Ba_KSCN_1min     2 469153  533.1101</span></span></code></pre>
<p>As we can see from the <span class="math inline">\(File\)</span> column, there are four replicates of the experiment. Each measurement of a replicate provide values for different possible charge values for each peptide. The result of a measurement is in column <span class="math inline">\(Center\)</span> - this is a geometrical centroid of an isotopic envelope - the product of the measurement from a mass spectrometer.</p>
<p>Let’s take a look for values for each replicate.</p>
<p><img src="transformation_files/figure-html/unnamed-chunk-3-1.png"><!-- --></p>
<p>The centroid values for different charge values are not useful. We have to transform it to the mass values, according to an equation:</p>
<p><span class="math display">\[ aggMass = z*(Center - protonMass)\]</span>
The results are shown below.</p>
<p><img src="transformation_files/figure-html/unnamed-chunk-4-1.png"><!-- --></p>
<p>This results are just for one repetition. We have four of them:</p>
<p><img src="transformation_files/figure-html/unnamed-chunk-5-1.png"><!-- --></p>
<p>Values from each replicate are aggregated into one value, using weighted mean (with intensity value as weight):</p>
<p><img src="transformation_files/figure-html/unnamed-chunk-6-1.png"><!-- --></p>
<p>The results from replicates are aggregated into the final result (mean), and the uncertainty (standard deviation of the mean) is calculated.</p>
<p><img src="transformation_files/figure-html/unnamed-chunk-7-1.png"><!-- --></p>
<p>Now we have the mass value for chosen peptide in the chosen state, measured in the chosen time point. This calculation is done for every other peptide, and these values of mass and uncertainty are used in the calculation of deuterium uptake, as described in the <code><a href="../articles/datafiles.html">vignette("datafiles")</a></code> article.</p>
</div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Weronika Puchala, Michal Burdukiewicz.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
