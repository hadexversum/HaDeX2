<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Data aggregation • HaDeX</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Data aggregation">
<meta property="og:description" content="HaDeX">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">HaDeX</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/HaDeX.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/datafiles.html">Data processing</a>
    </li>
    <li>
      <a href="../articles/mass_comparison.html">Mass calculation</a>
    </li>
    <li>
      <a href="../articles/transformation.html">Data aggregation</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Data aggregation</h1>
            
      
      
      <div class="hidden name"><code>transformation.Rmd</code></div>

    </div>

    
    
<p>The aggregation of the data is complex. This article describes the process step by step for a better understanding of the data transformation.</p>
<div id="aggregation-of-the-data---visualization" class="section level2">
<h2 class="hasAnchor">
<a href="#aggregation-of-the-data---visualization" class="anchor"></a>Aggregation of the data - visualization</h2>
<p>Let’s see how the data is transformed. We will use the example file “KD_180110_CD160_HVEM.csv” from the HaDeX package and focus on just one peptide - “LCKDRSGDCSPETSLKQLRLKRDPGIDGVGEISSQL” in the state “CD160”. The measurement was made for timepoint 1 min.</p>
<p>Below is shown the original and unaggregated data for chosen peptide.</p>
<pre><code>##      Protein Start End                             Sequence Modification
##  1: db_CD160    34  69 LCKDRSGDCSPETSLKQLRLKRDPGIDGVGEISSQL           NA
##  2: db_CD160    34  69 LCKDRSGDCSPETSLKQLRLKRDPGIDGVGEISSQL           NA
##  3: db_CD160    34  69 LCKDRSGDCSPETSLKQLRLKRDPGIDGVGEISSQL           NA
##  4: db_CD160    34  69 LCKDRSGDCSPETSLKQLRLKRDPGIDGVGEISSQL           NA
##  5: db_CD160    34  69 LCKDRSGDCSPETSLKQLRLKRDPGIDGVGEISSQL           NA
##  6: db_CD160    34  69 LCKDRSGDCSPETSLKQLRLKRDPGIDGVGEISSQL           NA
##  7: db_CD160    34  69 LCKDRSGDCSPETSLKQLRLKRDPGIDGVGEISSQL           NA
##  8: db_CD160    34  69 LCKDRSGDCSPETSLKQLRLKRDPGIDGVGEISSQL           NA
##  9: db_CD160    34  69 LCKDRSGDCSPETSLKQLRLKRDPGIDGVGEISSQL           NA
## 10: db_CD160    34  69 LCKDRSGDCSPETSLKQLRLKRDPGIDGVGEISSQL           NA
## 11: db_CD160    34  69 LCKDRSGDCSPETSLKQLRLKRDPGIDGVGEISSQL           NA
## 12: db_CD160    34  69 LCKDRSGDCSPETSLKQLRLKRDPGIDGVGEISSQL           NA
## 13: db_CD160    34  69 LCKDRSGDCSPETSLKQLRLKRDPGIDGVGEISSQL           NA
## 14: db_CD160    34  69 LCKDRSGDCSPETSLKQLRLKRDPGIDGVGEISSQL           NA
## 15: db_CD160    34  69 LCKDRSGDCSPETSLKQLRLKRDPGIDGVGEISSQL           NA
## 16: db_CD160    34  69 LCKDRSGDCSPETSLKQLRLKRDPGIDGVGEISSQL           NA
## 17: db_CD160    34  69 LCKDRSGDCSPETSLKQLRLKRDPGIDGVGEISSQL           NA
## 18: db_CD160    34  69 LCKDRSGDCSPETSLKQLRLKRDPGIDGVGEISSQL           NA
## 19: db_CD160    34  69 LCKDRSGDCSPETSLKQLRLKRDPGIDGVGEISSQL           NA
## 20: db_CD160    34  69 LCKDRSGDCSPETSLKQLRLKRDPGIDGVGEISSQL           NA
##     Fragment MaxUptake      MHP State Exposure                    File z
##  1:       NA        33 3900.991 CD160        1 KD_160530_CD160_1min_01 3
##  2:       NA        33 3900.991 CD160        1 KD_160530_CD160_1min_01 4
##  3:       NA        33 3900.991 CD160        1 KD_160530_CD160_1min_01 5
##  4:       NA        33 3900.991 CD160        1 KD_160530_CD160_1min_01 6
##  5:       NA        33 3900.991 CD160        1 KD_160530_CD160_1min_01 7
##  6:       NA        33 3900.991 CD160        1 KD_160530_CD160_1min_02 3
##  7:       NA        33 3900.991 CD160        1 KD_160530_CD160_1min_02 4
##  8:       NA        33 3900.991 CD160        1 KD_160530_CD160_1min_02 5
##  9:       NA        33 3900.991 CD160        1 KD_160530_CD160_1min_02 6
## 10:       NA        33 3900.991 CD160        1 KD_160530_CD160_1min_02 7
## 11:       NA        33 3900.991 CD160        1 KD_160530_CD160_1min_03 3
## 12:       NA        33 3900.991 CD160        1 KD_160530_CD160_1min_03 4
## 13:       NA        33 3900.991 CD160        1 KD_160530_CD160_1min_03 5
## 14:       NA        33 3900.991 CD160        1 KD_160530_CD160_1min_03 6
## 15:       NA        33 3900.991 CD160        1 KD_160530_CD160_1min_03 7
## 16:       NA        33 3900.991 CD160        1 KD_160530_CD160_1min_04 3
## 17:       NA        33 3900.991 CD160        1 KD_160530_CD160_1min_04 4
## 18:       NA        33 3900.991 CD160        1 KD_160530_CD160_1min_04 5
## 19:       NA        33 3900.991 CD160        1 KD_160530_CD160_1min_04 6
## 20:       NA        33 3900.991 CD160        1 KD_160530_CD160_1min_04 7
##           RT   Inten    Center
##  1: 4.524763  325032 1307.8329
##  2: 4.524404  753259  981.0960
##  3: 4.523707 1340447  785.0905
##  4: 4.524032 2076956  654.3858
##  5: 4.525778  759271  561.0548
##  6: 4.522330  239810 1307.7777
##  7: 4.521255  583325  981.0817
##  8: 4.521919 1011160  785.0811
##  9: 4.521726 1584254  654.4194
## 10: 4.522196  600218  561.0268
## 11: 4.523605  176788 1307.8942
## 12: 4.524804  402630  981.1597
## 13: 4.521938  746309  785.0906
## 14: 4.522238 1117344  654.4344
## 15: 4.524647  397718  561.0833
## 16: 4.531138  189258 1307.8739
## 17: 4.530608  441817  981.1656
## 18: 4.528928  796722  785.1220
## 19: 4.530066 1186263  654.4411
## 20: 4.531333  451071  561.0588</code></pre>
<p>As we can see from the <code>File</code> column, there are four replicates of the experiment. Each measurement of a replicate provide values for different possible charge values for each peptide. The result of a measurement is in column <code>Center</code> - this is a geometrical centroid of an isotopic envelope - the product of the measurement from a mass spectrometer.</p>
<p>Let’s take a look for values for each replicate.</p>
<p><img src="transformation_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
<p>The centroid values for different charge values are not useful. We have to transform it to the mass values, according to an equation:</p>
<p><span class="math display">\[ aggMass = z*(Center - protonMass)\]</span> The results are shown below.</p>
<p><img src="transformation_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<p>This results are just for one repetition. We have four of them:</p>
<p><img src="transformation_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>Values from each replicate are aggregated into one value, using weighted mean (with intencity value as weight):</p>
<p><img src="transformation_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>The results from replicates are aggregated into the final result (mean), and the uncertainty (standard deviation of the mean) is calculated.</p>
<p><img src="transformation_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
<p>Now we have the mass value for chosen peptide in the chosen state, measured in the chosen time point. This calculation is done for every other peptide, and these values of mass and uncertainty are used in the calculation of deuterium uptake, as described in the <code>Data processing</code> article.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Weronika Puchala, Michal Burdukiewicz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
